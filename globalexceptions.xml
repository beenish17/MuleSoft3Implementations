<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:spring="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd">
	<choice-exception-strategy name="rs2_exception_handlerCatch_Exception_Strategy-for-sfg_master_card_step2_flow">
		<catch-exception-strategy when="#[exception.causeMatches('java.io.IOException')]" doc:name="IO Catch Exception Strategy">
			<exception-type-filter expectedType="java.io.IOException" doc:name="java.io.IOException"/>
			<logger message="Error encrypting message #[exception.cause.message]" level="ERROR" doc:name="io Exception"/>
			<set-property propertyName="status_step" value="sfg_mc_out_step2" doc:name="Status Step"/>
			<set-property propertyName="status_value" value="0" doc:name="Status Value"/>
			<set-property propertyName="status_xfer_id" value="#[message.id]" doc:name="Status XFER ID"/>
			<vm:outbound-endpoint exchange-pattern="one-way" path="sfg.common.status.queue" connector-ref="sfg.common.status.queue" doc:name="Update status"/>
		</catch-exception-strategy>
		<catch-exception-strategy when="#[exception.causeMatches('java.lang.Exception')]" doc:name="Default Catch Exception Strategy">
			<exception-type-filter expectedType="java.lang.Exception" doc:name="java.lang.Exception"/>
			<logger message="Error message #[exception.cause.message]" level="ERROR" doc:name="Default Exception"/>
			<set-property propertyName="status_step" value="sfg_mc_out_step2" doc:name="Status Step"/>
			<set-property propertyName="status_value" value="0" doc:name="Status Value"/>
			<set-property propertyName="status_xfer_id" value="#[message.id]" doc:name="Status XFER ID"/>
			<vm:outbound-endpoint exchange-pattern="one-way" path="sfg.common.status.queue" connector-ref="sfg.common.status.queue" doc:name="Update status"/>
		</catch-exception-strategy>
	</choice-exception-strategy>
	<choice-exception-strategy name="rs2_exception_handlerCatch_Exception_Strategy-for-sfg_mc_step3_flow">
		<catch-exception-strategy when="#[exception.causeMatches('java.io.IOException')]" doc:name="IO Catch Exception Strategy">
			<exception-type-filter expectedType="java.io.IOException" doc:name="java.io.IOException"/>
			<logger message="Error encrypting message #[exception.cause.message]" level="ERROR" doc:name="io Exception"/>
			<set-property propertyName="status_step" value="sfg_mc_out_step3" doc:name="Status Step"/>
			<set-property propertyName="status_value" value="0" doc:name="Status Value"/>
			<set-property propertyName="status_xfer_id" value="#[message.id]" doc:name="Status XFER ID"/>
			<vm:outbound-endpoint exchange-pattern="one-way" path="sfg.common.status.queue" connector-ref="sfg.common.status.queue" doc:name="Update status"/>
		</catch-exception-strategy>
		<catch-exception-strategy when="#[exception.causeMatches('java.lang.Exception')]" doc:name="Default Catch Exception Strategy">
			<exception-type-filter expectedType="java.lang.Exception" doc:name="java.lang.Exception"/>
			<logger message="Error message #[exception.cause.message]" level="ERROR" doc:name="Default Exception"/>
			<set-property propertyName="status_step" value="sfg_mc_out_step3" doc:name="Status Step"/>
			<set-property propertyName="status_value" value="0" doc:name="Status Value"/>
			<set-property propertyName="status_xfer_id" value="#[message.id]" doc:name="Status XFER ID"/>
			<vm:outbound-endpoint exchange-pattern="one-way" path="sfg.common.status.queue" connector-ref="sfg.common.status.queue" doc:name="Update status"/>
		</catch-exception-strategy>
	</choice-exception-strategy>
</mule>
